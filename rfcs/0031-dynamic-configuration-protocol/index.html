<!DOCTYPE html>
<html lang="en">
<head>
    <!-- <base href="https://jakeatdocforce.github.io/interledger-dactyl/"> -->
    <!-- <base href="http://localhost:8000/"> -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="The protocol for connecting blockchains and other ledgers">

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <!-- Custom styles -->
    <link href="/assets/css/custom.css" rel="stylesheet">

    <!-- Google fonts -->
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,200,600,700|Droid+Sans+Mono|Titillium+Web:400,300,600' rel='stylesheet' type='text/css'>

    <link href="/assets/favicon.png" rel="icon" type="image/x-icon">

    <!--  highlight js -->
    <link rel="stylesheet" href="/assets/css/monokai-sublime.css">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->




</head>

<body class="xrp-ledger-dev-portal sidebar-primary ">

  <div class="container">
        <nav class="navbar fixed-top navbar-expand-lg navbar-dark nav-innerpage">
            <div class="navbar-leftbg"><a href="/index.html" class="navbar-brand"><img src="/assets/img/ilp_logo.png" class="logo"  height="44" alt="Interledger" /></a></div>
            <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarHolder" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <!-- <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"> -->

              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-end" id="navbarHolder">
              <ul class="nav navbar-nav">
                    <li class="nav-item" ><a class="nav-link" href="/overview.html">Docs</a></li>
                    <li class="nav-item" ><a class="nav-link" href="/libraries.html">Tools</a></li>
                    <li class="nav-item" ><a class="nav-link" href="/community.html">Community</a></li>
                    <li class="nav-item"><a class="nav-link" target="_blank" href="https://github.com/interledger">Edit on Github</a></li>
                    <li class="nav-item"><a class="nav-link cornerlink" href="/getting-started.html">Get Started</a></li>
              </ul><!-- /.navbar-nav -->
              <div class="cornerbox"></div>
            </div>
            <div class="menu-overlay"></div>
        </nav>
    </div>

    <div class="container-fluid" role="document" id="main_content_wrapper">
        <div class="row">

        <aside class="sidebar col-md-5 col-lg-3 p-0 order-md-1" role="complementary">

    <div id="sidenav" class="tree_nav">
      <ul class=" sidebar_pagelist">
        <li class="nav-label">Quick Start</li>
        <li><a href="/overview.html">Overview</a></li>
        <li><a href="/getting-started.html">Getting Started</a></li>
      </ul>
      <ul class=" sidebar_pagelist">
        <li class="nav-label">Community Resources</li>
        <li><a href="https://medium.com/interledger-blog">Blog &amp; Tutorials</a></li>
        <li><a href="/libraries.html">Libraries &amp; Tools</a></li>
        <li><a href="/summit-2019.html">ILP Summit 2019 Videos</a></li>
      </ul>

      <div class="sidebar-nav-header">Specs</div>
      <ul class=" sidebar_pagelist sidebar_indent">
        <!--    <li><a href="/rfcs/0001-interledger-architecture/">Interledger Architecture</a></li> -->
        <li><a href="/rfcs/0027-interledger-protocol-4/">Interledger Protocol 4 (ILPv4)</a></li>
        <li><a href="/rfcs/0015-ilp-addresses/">Interledger Addresses</a></li>
        <li><a href="/rfcs/0029-stream/">STREAM Protocol</a></li>
        <li><a href="/rfcs/0009-simple-payment-setup-protocol/">Simple Payment Setup Protocol (SPSP)</a></li>
        <li><a href="/rfcs/0026-payment-pointers/">Payment Pointers</a></li>
        <li><a href="/rfcs/0028-web-monetization/">Web Monetization</a></li>
        <li><a href="/rfcs/0030-notes-on-oer-encoding/">Notes on OER encoding</a></li>
        <li><a href="/rfcs/0031-dynamic-configuration-protocol/">Dynamic Configuration Protocol (ILDCP)</a></li>
        <li><a href="/rfcs/0032-peering-clearing-settlement/">Peering, Clearing and Settlement</a></li>
        <li><a href="/rfcs/0035-ilp-over-http/">ILP over HTTP</a></li>
        <li><a href="/rfcs/0036-spsp-pull-payments/">SPSP Pull Payments</a></li>
        <li><a target="_blank" href="https://w3c.github.io/webpayments/proposals/interledger-payment-method.html">W3C Web Payments</a></li>

      </ul>
    </div>        </aside>

          <!-- main column -->
        <main class="main col-md-7 col-lg-6 order-md-3  " role="main" id="main_content_body">
  <article class="pt-3 p-md-3">
    <div class="content doc-content">
        <h1 id="interledger-dynamic-configuration-protocol-ildcp-v1">Interledger Dynamic Configuration Protocol (ILDCP) v1</h1>
<h2 id="prerequisites">Prerequisites</h2>
<p>This specification assumes the reader is familiar with the following documents:</p>
<ul>
<li><a href="/rfcs/0001-interledger-architecture/">Interledger Architecture</a></li>
<li><a href="/rfcs/0027-interledger-protocol-4/">Interledger Protocol V4 (ILPv4)</a></li>
</ul>
<h2 id="terminology">Terminology</h2>
<ul>
<li>A <strong>node</strong> is a participant in an Interledger network. It may be a <a href="/rfcs/0001-interledger-architecture/#connectors">connector</a>, a sender or a receiver. </li>
<li>Nodes are connected to each other and the relationship between two nodes is either:</li>
<li><code>parent</code> and <code>child</code> (one node is the <code>parent</code> of another node that is relatively its <code>child</code>), or,</li>
<li><code>peer</code> and <code>peer</code> (two nodes are peered with one another).</li>
</ul>
<h2 id="overview">Overview</h2>
<p>Interledger is a protocol suite that consists of several protocols including the <a href="/rfcs/0023-bilateral-transfer-protocol/">Bilateral Transfer Protocol</a>, the Route Broadcasting Protocol and others necessary for establishment, operation and maintenance of the network. Interledger Dynamic Configuration Protocol (ILDCP) is one of these protocols.</p>
<p>In order to participate in the network a node must have an <a href="/rfcs/0015-ilp-addresses/">ILP address</a>. This address is part of a heirarchical address space where child nodes MAY be allocated addresses within the address space of their parent node. This makes routing on the network more efficient than if all nodes had top-level addresses.</p>
<p>A node is therefore either configured with an address which it broadcasts to its peers or, if the node has a parent in the network hierarchy, the ILP address of the child node can be allocated to it by the parent. This is done using ILDCP.</p>
<p>In short, <strong>ILDCP is a protocol used for transferring node and ledger information from a parent node to a child node</strong>. The transferred information is:</p>
<ul>
<li>An ILP address that the child should use for its own address</li>
<li>e.g. <code>g.crypto.foo.bar</code></li>
<li>An asset code of the asset that the two nodes will use to settle</li>
<li>e.g. <code>XRP</code></li>
<li>An asset scale for amounts that will be used in ILP packets exchanged between the nodes.</li>
<li>e.g. <code>6</code></li>
</ul>
<p>Future versions of the protocol MAY exchange additional configuration information.</p>
<h2 id="protocol-detail">Protocol Detail</h2>
<h3 id="procedure">Procedure</h3>
<p>An exchange of configuration information is done using the following procedure.</p>
<ol>
<li>A child node requests configuration information from the parent node</li>
<li>The parent node responds with the configuration information to the child node</li>
<li>If the request cannot be processed, the parent node responds with an error</li>
</ol>
<h3 id="packet">Packet</h3>
<p>The request and the response above are transferred in <a href="/rfcs/0027-interledger-protocol-4/#specification">ILP packets</a>. </p>
<p>The <code>fulfillment</code> of the response packet is always a zero-filled 32 byte octet string, therefore the condition is always the SHA-256 hash digest of that, i.e. the Base64 decoded value of <code>Zmh6rfhivXdsj8GLjp+OIAiXFIVu4jOzkCpZHQ1fKSU=</code>.</p>
<p>As with other bilateral protocols the packets are addressed directly to the peer using the <code>peer.</code> address prefix. ILDCP packets are specifically identified using the address <code>peer.config</code>.</p>
<p>All current implementations of ILDCP default to an amount of <code>0</code> in the ILP packets used to request configuration. In future, peers may agree to pay a charge for reserving an address, in which case this may become a non-zero amount indicating the amount paid by the child to reserve an address. Future version of the protocol may allow for the child to explicitly request an address which may not be restricted to being in the parent's address-space.</p>
<p>The packet exchange goes as follows:</p>
<ul>
<li>Request</li>
<li>The <code>type</code> of the ILP packet is <code>ILP Prepare</code> (type id: 12)</li>
<li>The <code>amount</code> of the ILP packet defaults to <code>0</code>.</li>
<li>The <code>expiresAt</code> of the ILP packet is arbitrary.</li>
<li>The <code>executionCondition</code> of the ILP packet is <code>Zmh6rfhivXdsj8GLjp+OIAiXFIVu4jOzkCpZHQ1fKSU=</code> in Base64 format</li>
<li>The <code>destination</code> address of the ILP packet is <code>peer.config</code></li>
<li>
<p>The <code>data</code> of the ILP packet is empty (size: 0)</p>
</li>
<li>
<p>Response</p>
</li>
<li>The <code>type</code> of the ILP packet is <code>ILP Fulfill</code> (type id: 13)</li>
<li>The <code>fulfillment</code> of the ILP packet is a 32-byte octet string all filled with zeros</li>
<li>
<p>The <code>data</code> of the ILP packet takes a specific format and is described by <code>DynamicConfigurationResponseData</code> in the ILDCP <a href="#asn1-definition">ASN.1 definition</a>. It is an OER encoded SEQUENCE of</p>
<ul>
<li><code>Variable-length octet string</code>: An ILP address that the child should use, encoded as an <code>ASCII</code> string</li>
<li><code>Uint8</code>: An unsigned 8-bit integer indicating the asset scale that should be used for packets exchanged with the parent</li>
<li><code>Variable-length octet string</code>: An asset code, encoded as a <code>UTF-8</code> string, indicating the settlement asset used between the peers</li>
</ul>
</li>
<li>
<p>Error</p>
</li>
<li>The <code>type</code> of the ILP packet is <code>ILP Reject</code> (type id: 14)</li>
<li>The <code>code</code> of the ILP packet is an appropriate error code</li>
<li>The <code>message</code> of the ILP packet is an appropriate human-readable message for debugging purposes</li>
<li>The <code>triggeredBy</code> of the ILP packet is the ILP address of the parent node</li>
<li>The <code>data</code> of the ILP packet is empty (size: 0) or MAY contain further information for debugging the error.</li>
</ul>
<h3 id="asn1-definition">ASN.1 Definition</h3>
<p>The ASN.1 definition of ILP packets is described in <a href="/rfcs/asn1/InterledgerProtocol.asn.html">InterledgerProtocol.asn</a> and Dynamic Configuration Protocol data in <a href="/rfcs/asn1/DynamicConfigurationProtocol.asn.html">DynamicConfigurationProtocol.asn</a>.</p>
<h3 id="encoding">Encoding</h3>
<p>All ASN.1 types are encoded using <a href="/rfcs/0030-notes-on-oer-encoding/">Octet Encoding Rules</a> as is the norm with all Interledger protocols.</p>
    </div>
  </article>
        </main>

        <aside class="right-sidebar col-lg-3 order-lg-4 p-0" role="complementary">
  <div class="card" id="page-toc-wrapper">
    <div class="card-header">
      <h4>On This Page</h4>
    </div>
    <ul class="card-body">
      <li class="level-1"><a href="#interledger-dynamic-configuration-protocol-ildcp-v1">Interledger Dynamic Configuration Protocol (ILDCP) v1</a></li>
<li class="level-2"><a href="#prerequisites">Prerequisites</a></li>
<li class="level-2"><a href="#terminology">Terminology</a></li>
<li class="level-2"><a href="#overview">Overview</a></li>
<li class="level-2"><a href="#protocol-detail">Protocol Detail</a></li>
<li class="level-3"><a href="#procedure">Procedure</a></li>
<li class="level-3"><a href="#packet">Packet</a></li>
<li class="level-3"><a href="#asn1-definition">ASN.1 Definition</a></li>
<li class="level-3"><a href="#encoding">Encoding</a></li>

    </ul>
  </div>
        </aside>

        </div><!--/.row (main layout)-->
      </div>


<footer>
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="col-sm-10 col-xs-12 float-left">
                    <img src="/assets/img/footerlogo.png">
                </div>
                <div class="col-sm-2 col-xs-12 float-right">
                    <a href="https://twitter.com/interledger"><img src="/assets/img/Twitter.png"></a>
                    <a href="https://communityinviter.com/apps/interledger/interledger-working-groups-slack"><img src="/assets/img/Slack.png"></a>
                </div>
            </div>
        </div>
    </div>
</footer>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="/assets/js/bootstrap.min.js"></script>
<script src="/assets/js/custom.js"></script>
<script src="/assets/js/highlight.pack.js"></script>
<script src="/assets/js/home.js"></script>
<script type="text/javascript" src="/assets/js/svg-animation.js"></script>

<!-- <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-68500608-1', 'auto');
    ga('send', 'pageview');

</script> -->

</body>
</html>