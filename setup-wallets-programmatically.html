<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="The protocol for connecting blockchains and other ledgers">

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <!-- Custom styles -->
    <link href="/assets/css/custom.css" rel="stylesheet">

    <!-- Google fonts -->
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,200,600,700,900|Droid+Sans+Mono|Titillium+Web:400,300,600,900' rel='stylesheet' type='text/css'>

    <link href="/assets/img/favicon.png" rel="icon" type="image/x-icon">

    <!--  highlight js -->
    <link rel="stylesheet" href="/assets/css/monokai-sublime.css">

    <!-- fontawesome icons -->
    <link rel="stylesheet" href="/assets/fontawesome/css/font-awesome.min.css" />

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->




</head>

<body class="sidebar-primary ">

  <!-- <div class="container"> -->
        <nav class="navbar fixed-top navbar-expand-lg navbar-dark nav-innerpage">
            <div class="navbar-leftbg"><a href="/" class="navbar-brand"><img src="/assets/img/ilp_logo@2x.png" class="logo"  height="44" alt="Interledger" /></a></div>
            <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarHolder" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">

              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-end" id="navbarHolder">
              <ul class="nav navbar-nav">
                    <li class="nav-item" ><a class="nav-link" href="/overview.html">Docs</a></li>
                    <li class="nav-item" ><a class="nav-link" href="/libraries.html">Tools</a></li>
                    <li class="nav-item" ><a class="nav-link" href="/community.html">Community</a></li>
                    <li class="nav-item"><a class="nav-link" target="_blank" href="https://github.com/interledger">Edit on Github</a></li>
                    <li class="nav-item"><a class="nav-link cornerlink" href="/getting-started.html">Get Started</a></li>
              </ul><!-- /.navbar-nav -->
              <div class="cornerbox"></div>
            </div>
            <div class="menu-overlay"></div>
        </nav>
    <!-- </div> -->

    <div class="container-fluid" role="document" id="main_content_wrapper">
        <div class="row">

        <aside class="sidebar col-md-4 col-lg-3 p-0 order-md-1" role="complementary">

    <div id="sidenav" class="tree_nav">
      <ul class=" sidebar_pagelist">
        <li class="nav-label">Getting Started</li>
            <ul class=" sidebar_pagelist sidebar_indent">
                <li><a href="/overview.html">Overview</a></li>
                <li><a href="/setup-wallets.html">Set Up and Use Interledger Accounts with a User Interface</a></li>
                <li><a href="/setup-wallets-programmatically.html">Set Up and Use Interledger Accounts Programmatically</a></li>
            </ul>
      </ul>
      <ul class=" sidebar_pagelist">
        <li class="nav-label">Community Resources</li>
        <li><a class="external-link" href="https://medium.com/interledger-blog">Blog and Tutorials<i class="fa fa-external-link" aria-hidden="true"></i></a></li>
        <li><a href="/libraries.html">Libraries and Tools</a></li>
        <li><a href="/summit-2019.html">ILP Summit 2019 Videos</a></li>
      </ul>

      <div class="sidebar-nav-header">Specs</div>
      <ul class=" sidebar_pagelist sidebar_indent">
            <li><a href="/rfcs/0027-interledger-protocol-4/">Interledger Protocol 4 (ILPv4)</a></li>
            <li><a href="/rfcs/0015-ilp-addresses/">Interledger Addresses</a></li>
            <li><a href="/rfcs/0029-stream/">STREAM Protocol</a></li>
            <li><a href="/rfcs/0009-simple-payment-setup-protocol/">Simple Payment Setup Protocol (SPSP)</a></li>
            <li><a href="/rfcs/0030-notes-on-oer-encoding/">Notes on OER encoding</a></li>
            <li><a href="/rfcs/0031-dynamic-configuration-protocol/">Dynamic Configuration Protocol (ILDCP)</a></li>
            <li><a href="/rfcs/0032-peering-clearing-settlement/">Peering, Clearing and Settlement</a></li>
            <li><a href="/rfcs/0038-settlement-engines/">Settlement Engines</a></li>
            <li><a href="/rfcs/0035-ilp-over-http/">ILP over HTTP</a></li>
            <li><a href="/rfcs/0036-spsp-pull-payments/">SPSP Pull Payments</a></li>
            <li>&nbsp;</li>
            <li><a class="external-link" target="_blank" href="https://paymentpointers.org">Payment Pointers</a></li>
            <li><a class="external-link" target="_blank" href="https://webmonetization.org">Web Monetization</a></li>
            <li><a class="external-link" target="_blank" href="https://w3c.github.io/webpayments/proposals/interledger-payment-method.html">W3C Web Payments</a></li>
        </ul>
    </div>        </aside>

          <!-- main column -->
        <main class="main col-md-8  col-lg-6   order-md-3  " role="main" id="main_content_body">
  <article class="pt-3 p-md-3">
    <div class="content doc-content">
        <h1 id="main-page-header">Set Up and Use Interledger Accounts Programmatically</h1>
        <p class="blurb">Set up and use Interledger accounts to send and receive test funds programmatically</p>
        <h2 id="interledger-protocol-ilp-testnet-getting-started-with-programmatic-access">Interledger Protocol (ILP) TestNet: Getting Started With Programmatic Access</h2>
<p>This tutorial describes how to use the ILP Testnet to send value programmatically. Although this tutorial uses test XRP for simplicity, Interledger can handle transactions involving any currency pairs, as described in <a href="overview.html">Interledger Overview</a>.</p>
<p>You will:</p>
<ol>
<li><a href="#1-create-an-account">Create an account</a> on the ILP Testnet.</li>
<li><a href="#2-add-test-xrp-to-your-account">Add test XRP</a> to your account using the ILP TestNet Rainmaker (our version of a "faucet").</li>
<li><a href="#3-check-your-account-balance">Check your account balance</a>.</li>
<li><a href="#4-send-test-xrp-to-another-payment-pointer">Send test XRP</a> to another payment pointer.</li>
<li><a href="#5-receive-test-xrp">Receive test XRP</a>.</li>
</ol>
<p>To do the same with a GUI-based interface, refer to <a href="setup-wallets.html">Set Up Interledger accounts with a user interface</a>.</p>
<h3 id="1-create-an-account">1. Create an account</h3>
<p>Create a new account with this command:</p>
<pre><code>&gt; curl --location --request POST 'https://hermes-rest.ilpv4.dev/accounts' \
--header 'Content-Type: application/json' \
--header 'Accept: application/json' \
--data-raw '{
  "assetCode": "XRP",
  "assetScale": "6"
}'
</code></pre>
<p>This request returns:
- A payload that contains your <code>accountId</code>
- An auth token which you use to authenticate to the connector
= A <a class="external-link" href="https://paymentpointers.org/" target="_blank">payment pointer <i aria-hidden="true" class="fa fa-external-link"></i></a> that can be used to receive value in your test account.</p>
<p>Here's an example response payload for reference. Keep track of the generated <code>accountId</code> at <code>accountId</code>, and your generated auth token at <code>"customSettings"</code> -&gt; <code>"ilpOverHttp.incoming.simple.auth_token"</code>, for use in subsequent steps.</p>
<pre><code class="text">{
    "accountId": "user_qqGV8nij",
    "accountRelationship": "CHILD",
    "assetCode": "XRP",
    "assetScale": "6",
    "maximumPacketAmount": null,
    "linkType": {},
    "connectionInitiator": true,
    "isInternal": false,
    "sendRoutes": true,
    "receiveRoutes": false,
    "balanceSettings": {
        "minBalance": null,
        "settleThreshold": null,
        "settleTo": "0"
    },
    "rateLimitSettings": {
        "maxPacketsPerSecond": null
    },
    "settlementEngineDetails": null,
    "customSettings": {
        "ilpOverHttp.outgoing.url": "https://money.ilpv4.dev/ilp",
        "ilpOverHttp.incoming.auth_type": "SIMPLE",
        "ilpOverHttp.incoming.simple.auth_token": "JQBzzLkbslrsT",
        "ilpOverHttp.outgoing.simple.auth_token": "enc:jks:crypto/crypto.p12:secret0:1:aes_gcm:AAAADDBa7b-nDvY2ydWysQQMoZL7yIOmK-7-3kLiMc9pxhzPw1Ei68OpwcZu6W-j",
        "ilpOverHttp.outgoing.auth_type": "SIMPLE"
    },
    "paymentPointer": "$money.ilpv4.dev/user_qqGV8nij",
    "parentAccount": false,
    "childAccount": true,
    "peerAccount": false,
    "peerOrParentAccount": false
}
</code></pre>
<h3 id="2-add-test-xrp-to-your-account">2. Add test XRP to your account</h3>
<p>The ILP Testnet has a rainmaker account that you can use to populate your account with test XRP, so you can then use this account to send test XRP to other accounts. To add test XRP to your account, use the following command. Make sure to replace <code>{your-account-id}</code> with your own <code>accountId</code> created in Step 1.</p>
<pre><code>&gt; curl --location --request POST \
  'https://hermes-rest.ilpv4.dev/accounts/{your-account-id}/money'
</code></pre>
<h3 id="3-check-your-account-balance">3. Check your account balance</h3>
<p>To see how much money is in your account, try the following call. Make sure to replace <strong><code>{auth_token}</code></strong> above with the auth token returned when you generated your account.</p>
<pre><code>&gt; curl --location --request GET 'https://hermes-rest.ilpv4.dev/accounts/{your-account-id}/balance' \
--header 'Accept: application/json' \
--header 'Authorization: Bearer {auth_token}' \
</code></pre>
<p>This request will return a JSON response similar to the following:</p>
<pre><code class="text">{
    "assetCode": "XRP",
    "assetScale": "6",
    "accountBalance": {
        "accountId": "user_qqGV8nij",
        "netBalance": "0",
        "clearingBalance": "0",
        "prepaidAmount": "0"
    }
}
</code></pre>
<h3 id="4-send-test-xrp-to-another-payment-pointer">4. Send test XRP to another payment pointer</h3>
<p>You can use your account to send test XRP to a different payment pointer. This example uses a destination payment pointer on <a class="external-link" href="https://rafiki.money" target="_blank">https://rafiki.money <i aria-hidden="true" class="fa fa-external-link"></i></a>. Substitute your <code>accountId</code> from Step 1. You can change the destination payment pointer if you prefer.</p>
<pre><code>&gt; curl --location --request POST 'https://hermes-rest.ilpv4.dev/accounts/{your-account-id}/pay' \
--header 'Content-Type: application/json' \
--header 'Accept: application/json' \
--header 'Authorization: Bearer {auth_token}' \
--data-raw '{
  "amount": "10",
  "destinationPaymentPointer": "$rafiki.money/p/dfuelling"
}'
</code></pre>
<p>This request returns a JSON response similar to the following:</p>
<pre><code class="text">{
    "originalAmount": "10",
    "amountDelivered": "10",
    "amountSent": "10",
    "successfulPayment": true
}
</code></pre>
<ul>
<li>
<p><strong><code>originalAmount</code></strong> is the amount that you wanted to send.</p>
</li>
<li>
<p><strong><code>amountDelivered</code></strong> is the amount your friend actually received.</p>
</li>
<li>
<p><strong><code>amountSent</code></strong> is the amount that actually got sent to your friend.</p>
</li>
</ul>
<p>In this example, all three values are the same.</p>
<h3 id="5-receive-test-xrp">5. Receive test XRP</h3>
<p>Set up a Xpring Testnet account and a rafiki.money account so you have two destination pointers to work with. Experiment with sending and receiving test XRP in both directions. Check your balance to make sure that the money has arrived in your account.</p>
<h3 id="combine-gui-and-programmatic-interaction">Combine GUI and programmatic interaction</h3>
<p>If you log in to your accounts at <a class="external-link" href="https://rafiki.money" target="_blank">rafiki.money <i aria-hidden="true" class="fa fa-external-link"></i></a> and <a class="external-link" href="https://wallet.ilpv4.dev" target="_blank">https://wallet.ilpv4.dev <i aria-hidden="true" class="fa fa-external-link"></i></a>, you can directly see the results of the commands you perform.</p>
    </div>
  </article>
        </main>

        <aside class="right-sidebar col-lg-3 order-lg-4 p-0" role="complementary">
  <div class="card" id="page-toc-wrapper">
    <div class="card-header">
      <h4>On This Page</h4>
    </div>
    <ul class="card-body">
      <li class="level-2"><a href="#interledger-protocol-ilp-testnet-getting-started-with-programmatic-access">Interledger Protocol (ILP) TestNet: Getting Started With Programmatic Access</a></li>
<li class="level-3"><a href="#1-create-an-account">1. Create an account</a></li>
<li class="level-3"><a href="#2-add-test-xrp-to-your-account">2. Add test XRP to your account</a></li>
<li class="level-3"><a href="#3-check-your-account-balance">3. Check your account balance</a></li>
<li class="level-3"><a href="#4-send-test-xrp-to-another-payment-pointer">4. Send test XRP to another payment pointer</a></li>
<li class="level-3"><a href="#5-receive-test-xrp">5. Receive test XRP</a></li>
<li class="level-3"><a href="#combine-gui-and-programmatic-interaction">Combine GUI and programmatic interaction</a></li>

    </ul>
  </div>
        </aside>

        </div><!--/.row (main layout)-->
      </div>


<footer>
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="col-sm-9 col-xs-12 float-left footertext">
                    <p><img src="/assets/img/ilp_footer_logo@2x.png" height="44" alt="Interledger" align="left" /> Interledger Project<br><span>Documentation licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0.</a></span></p>
                </div>
                <div class="col-sm-3 col-xs-12 float-right">
                    <a href="https://twitter.com/interledger"><img src="/assets/img/Twitter.png"></a>
                    <a href="https://communityinviter.com/apps/interledger/interledger-working-groups-slack"><img src="/assets/img/Slack.png"></a>
                </div>
            </div>
        </div>
    </div>
</footer>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="/assets/js/bootstrap.min.js"></script>
<script src="/assets/js/highlight.pack.js"></script>
<script src="/assets/js/custom.js"></script>
<!-- <script src="/assets/js/home.js"></script> -->
<!-- <script type="text/javascript" src="/assets/js/svg-animation.js"></script> -->

<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-68500608-1', 'auto');
    ga('send', 'pageview');

</script>

</body>
</html>